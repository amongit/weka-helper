http://zdnet.com.feedsportal.com/c/35462/f/675683/s/44713678/sc/4/l/0L0Szdnet0N0Carticle0Cbuilding0Ea0Epre0Erelease0Elinux0Etestbed0Ewith0Eopensuse0Efedora0Eubuntu0Eand0Emore0C0Tftag0FRSSbaffb68/story01.htm
Building a pre-release Linux testbed with openSuSE, Fedora, Ubuntu, and more
I had a relatively quiet weekend planned, which would have been a nice change for me after all the traveling I have done recently. 'Would have been' is the key phrase here...
I was updating various things on one of my netbooks, the Acer Aspire V5, and I thought, 'What the heck, I'll let it install Windows updates as well. It's probably best to keep up with the most important security patches, and anyway what could it hurt, since I practically never boot Windows on that system?'
What could it hurt indeed. Grrrr. I started Windows Update as usual, and it chugged along looking normal (deathly slow). No error messages, no problems, no update failures. When it had finished, I let it reboot. Then the fun started. When it tried to boot, I got the message: No Bootable Devices Found.
OK, I told myself, take it easy. This is a UEFI system, and they are well known as being a royal pain in the hind quarters. Windows probably just wiped the UEFI boot configuration, or screwed it up in some other way. I rebooted, and pressed F12 to get a boot selection list. Still no joy - it came up with an empty list.
My anger was rising at this point, but I was still telling myself not to get too worked up. I just needed to boot one of my Linux UEFI Live USB sticks, and then manually create the UEFI boot list again. No worries. I grabbed the openSuSE 13.2 stick, booted it up, and decided to check the disk partitioning layout to be sure what was where. But running blkid produced no output. None. 'What the heck is going on here?' I thought.
Panic was starting to creep in, and was pushing the anger level even higher. 'OK, run gparted and see exactly what Windows has done to me,' I thought. And...nothing. Empty. The entire hard drive was unallocated space.
Time to rant. Microsoft, I hate you! I hope that each and every one of you is condemned to an endless purgatory of trying to recover corrupted Windows systems!
OK, with that rant out of the way, what to do? The prospect of installing Windows from scratch was unappealing beyond description.
On top of that, even if I got it installed and running again, I would have to go through the fight to get UEFI boot configured to dual-boot Windows and Linux, and that in itself is a basically never-ending struggle because Windows keeps trying to 'reclaim' first boot.
So, I decided to just forget about Windows, and reload this system from scratch as a Linux-only system. That's kind of interesting, because I haven't done that with a UEFI system before, so I will get to see whether configuring and managing UEFI boot really is significantly easier without Windows constantly trying to muck with it.
Then I had another thought: there are quite a few development and pre-release distributions available right now, so why not make this system a sort of 'pre-release test bed', and load it with all of those? Sounded like a good idea, and some good fun, so off I went. All of the screenshots you'll see in the text below were made on the Aspire One V5 after each of the installations completed.
First up was openSuSE (tumbleweed), because I prefer to use its UEFI boot setup to manage multiboot with all the other versions I install.
I have found it to be the most flexible and reliable, and able to handle multi-boot with other UEFI systems and non-UEFI (MBR) systems at the same time. Installing that was dead easy, as it always is.
It created all of the necessary partitions. All I had to do was resize them to leave room for the other distributions I was going to install. No problems of any kind with hardware, software, UEFI boot configuration, or anything else.
Wow, was that ever nice. The day was starting to look a lot better than it was just a short time ago. At this point I was thinking to myself that I could have spent the rest of today, and a good part of tomorrow reinstalling Windows, but instead I spent 30 minutes installing Linux, and the netbook is ready to use again. Not bad.
Next up was Fedora 22 Alpha. I hadn't had a chance to try this since it was announced a week or so ago, so this was an extra treat for me, not least because I'm always glad to see the latest developments and improvements in the 'anaconda' installer. I downloaded the workstation version, which has the Gnome3 desktop.
There are other images available for Live versions of KDE, Xfce, and LXDE. Fedora also installed with absolutely no problems, all hardware was recognized and configured, everything worked... amazingly good and stable for an Alpha release!
One small note about this; anaconda has been complaining about me using a 'weak' password for quite some time, and it had been making me click 'Done' twice to confirm that I really wanted to be a naughty boy and use such a password. Well, it appears that with this release anaconda will not let me use a weak password, no matter how many times I click 'Done'. This might be configurable, or avoidable in some other way, I haven't looked into it yet.
Next in line was Debian GNU/Linux, the version 8 (Jessie) RC1 installer which was released in January. Once again, it booted and installed without a hitch, all hardware was recognized and supported, without requiring any supplemental drivers or non-FOSS repositories.
Both Debian and Fedora handled UEFI boot configuration with no problem as well. They each added themselves to the UEFI boot list, which had the side effect each time of making them first in the list and thus the default boot target.
I could then manage that list, and set the boot sequence, using the Linux efibootmgr command. No complications, no overwriting each other, and none of them has gotten rude and tried to reclaim the default boot position after I changed it manually (if only Windows were this well behaved with UEFI boot configuration).
I would like to have installed a pre-release version of Linux Mint Debian Edition 2 (Betsy) next, but it is not available yet. There have been a number of 'real soon now' comments in the Mint blog and the Segfault blog, but as yet the pre-release has not seen the light of day.
Rather than slog through installing the (extremely) old LMDE 201403 release... whoa, I hadn't even thought about that. The latest release of Mint Debian is a year old now, and has had precious few updates during that year of life. Well, anyway for lack of anything better I settled for installing Linux Mint 17.1, the latest in the Ubuntu-derived Mint line.
I have learned from experience, though, that when I am installing Linux Mint and Ubuntu on the same system, I have to make some allowances for their overlap. I don't want to go into all the gory details here, but in brief the problem is that Linux Mint 17 is based on Ubuntu (14.04 LTS), and it still uses the 'ubuntu' name for the UEFI boot directory.
If you don't take any action to prevent it, whichever of those you install second will overwrite the UEFI boot setup of the first. Not nice, and not much fun.
The only solution I have found is after installing the first one, and before installing the second, you need to create a second EFI boot partition and move the EFI boot directory for the first to this new partition. Finally, don't forget to update the 'fstab' file accordingly.
Next on the pre-release hit list was Ubuntu, with their 15.04 release due out next month. Rather than scratch around looking for a Beta or RC release (Ubuntu started doing something different in this a few releases ago, but the various spins don't do the same thing, and the end result is too confusing for me to worry about), I just picked up the latest "daily build" of the upcoming release.
I then dumped that to a USB stick using 'dd', as I do with essentially all of the distributions - without stopping to think that this doesn't work with Ubuntu. Except, this time it did! Hooray!
I hadn't read or heard anything about this, so what a pleasant surprise. The boot, installation, configuration and operation all went smoothly, and once again everything worked just fine.
When I started on this, I had expected to be finished when I got to this point. But as I was browsing around, picking up a few odd bits of data for this post, I noticed the announcement of Manjaro 0.9.0 pre-4.
I have become quite enamoured with Manjaro, so I decided to add that as well. I must have put my brain into zombie mode again (as I did with Ubuntu), because I downloaded the ISO, dumped it to a USB stick, and booted it - then as the Live USB started to boot I suddenly thought, 'Hey, wait, Manjaro doesn't do UEFI boot yet, and I haven't switched the BIOS to Legacy boot!'
Obviously Manjaro does UEFI now, at least in this pre-release version, because the Live USB stick booted right up. It's not yet entirely done, though: the installers didn't quite seem to be able to get it right.
There are two installers, a CLI and a GUI version, and I tried both and they both croaked when trying to install the bootloader. They did, however, get everything else done, so I was able to go back to openSuSE and set up the grub configuration there to handle a non-EFI boot of Manjaro. Everything worked normally then, just as it did with all the other distributions on this system.
So, that's it for today: I have five lovely new pre-release Linux distributions installed and working, all of which exhibit good UEFI manners and don't make a miserable fuss scribbling over each other's boot configurations. I also have one stable release, and as soon as Linux Mint Debian Edition Betsy debuts, I will add that as well. Good stuff! Thanks Microsoft!
Read more of my blog
